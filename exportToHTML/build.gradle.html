<html>
<head>
<title>build.gradle</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #bcbec4;}
.s2 { color: #6aab73;}
.s3 { color: #7a7e85;}
.s4 { color: #2aacb8;}
.s5 { color: #cf8e6d;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
build.gradle</font>
</center></td></tr></table>
<pre><span class="s0">plugins </span><span class="s1">{</span>
    <span class="s0">id </span><span class="s2">'eclipse'</span>
    <span class="s0">id </span><span class="s2">'idea'</span>
    <span class="s0">id </span><span class="s2">'maven-publish'</span>
    <span class="s0">id </span><span class="s2">'net.minecraftforge.gradle' </span><span class="s0">version </span><span class="s2">'[6.0,6.2)'</span>
    <span class="s0">id </span><span class="s2">'org.parchmentmc.librarian.forgegradle' </span><span class="s0">version </span><span class="s2">'1.+'</span>
<span class="s1">}</span>

<span class="s0">version </span><span class="s1">= </span><span class="s0">mod_version</span>
<span class="s0">group </span><span class="s1">= </span><span class="s0">mod_group_id</span>

<span class="s0">base </span><span class="s1">{</span>
    <span class="s0">archivesName </span><span class="s1">= </span><span class="s0">mod_id</span>
<span class="s1">}</span>

<span class="s3">// Mojang ships Java 17 to end users in 1.18+, so your mod should target Java 17.</span>
<span class="s0">java.toolchain.languageVersion </span><span class="s1">= </span><span class="s0">JavaLanguageVersion.of</span><span class="s1">(</span><span class="s4">17</span><span class="s1">)</span>

<span class="s0">println </span><span class="s2">&quot;Java: </span><span class="s0">$</span><span class="s1">{</span><span class="s0">System.getProperty </span><span class="s2">'java.version'</span><span class="s1">}</span><span class="s2">, JVM: </span><span class="s0">$</span><span class="s1">{</span><span class="s0">System.getProperty </span><span class="s2">'java.vm.version'</span><span class="s1">} </span><span class="s2">(</span><span class="s0">$</span><span class="s1">{</span><span class="s0">System.getProperty </span><span class="s2">'java.vendor'</span><span class="s1">}</span><span class="s2">), Arch: </span><span class="s0">$</span><span class="s1">{</span><span class="s0">System.getProperty </span><span class="s2">'os.arch'</span><span class="s1">}</span><span class="s2">&quot;</span>
<span class="s0">minecraft </span><span class="s1">{</span>
    <span class="s3">// The mappings can be changed at any time and must be in the following format.</span>
    <span class="s3">// Channel:   Version:</span>
    <span class="s3">// official   MCVersion             Official field/method names from Mojang mapping files</span>
    <span class="s3">// parchment  YYYY.MM.DD-MCVersion  Open community-sourced parameter names and javadocs layered on top of official</span>
    <span class="s3">//</span>
    <span class="s3">// You must be aware of the Mojang license when using the 'official' or 'parchment' mappings.</span>
    <span class="s3">// See more information here: https://github.com/MinecraftForge/MCPConfig/blob/master/Mojang.md</span>
    <span class="s3">//</span>
    <span class="s3">// Parchment is an unofficial project maintained by ParchmentMC, separate from MinecraftForge</span>
    <span class="s3">// Additional setup is needed to use their mappings: https://parchmentmc.org/docs/getting-started</span>
    <span class="s3">//</span>
    <span class="s3">// Use non-default mappings at your own risk. They may not always work.</span>
    <span class="s3">// Simply re-run your setup task after changing the mappings to update your workspace.</span>
    <span class="s0">mappings channel: mapping_channel, version: mapping_version</span>

    <span class="s3">// When true, this property will have all Eclipse/IntelliJ IDEA run configurations run the &quot;prepareX&quot; task for the given run configuration before launching the game.</span>
    <span class="s3">// In most cases, it is not necessary to enable.</span>
    <span class="s3">// enableEclipsePrepareRuns = true</span>
    <span class="s3">// enableIdeaPrepareRuns = true</span>

    <span class="s3">// This property allows configuring Gradle's ProcessResources task(s) to run on IDE output locations before launching the game.</span>
    <span class="s3">// It is REQUIRED to be set to true for this template to function.</span>
    <span class="s3">// See https://docs.gradle.org/current/dsl/org.gradle.language.jvm.tasks.ProcessResources.html</span>
    <span class="s0">copyIdeResources </span><span class="s1">= </span><span class="s5">true</span>

    <span class="s3">// When true, this property will add the folder name of all declared run configurations to generated IDE run configurations.</span>
    <span class="s3">// The folder name can be set on a run configuration using the &quot;folderName&quot; property.</span>
    <span class="s3">// By default, the folder name of a run configuration is the name of the Gradle project containing it.</span>
    <span class="s3">// generateRunFolders = true</span>

    <span class="s3">// This property enables access transformers for use in development.</span>
    <span class="s3">// They will be applied to the Minecraft artifact.</span>
    <span class="s3">// The access transformer file can be anywhere in the project.</span>
    <span class="s3">// However, it must be at &quot;META-INF/accesstransformer.cfg&quot; in the final mod jar to be loaded by Forge.</span>
    <span class="s3">// This default location is a best practice to automatically put the file in the right place in the final jar.</span>
    <span class="s3">// See https://docs.minecraftforge.net/en/latest/advanced/accesstransformers/ for more information.</span>
    <span class="s3">// accessTransformer = file('src/main/resources/META-INF/accesstransformer.cfg')</span>

    <span class="s3">// Default run configurations.</span>
    <span class="s3">// These can be tweaked, removed, or duplicated as needed.</span>
    <span class="s0">runs </span><span class="s1">{</span>
        <span class="s3">// applies to all the run configs below</span>
        <span class="s0">configureEach </span><span class="s1">{</span>
            <span class="s0">workingDirectory project.file</span><span class="s1">(</span><span class="s2">'run'</span><span class="s1">)</span>

            <span class="s3">// Recommended logging data for a userdev environment</span>
            <span class="s3">// The markers can be added/remove as needed separated by commas.</span>
            <span class="s3">// &quot;SCAN&quot;: For mods scan.</span>
            <span class="s3">// &quot;REGISTRIES&quot;: For firing of registry events.</span>
            <span class="s3">// &quot;REGISTRYDUMP&quot;: For getting the contents of all registries.</span>
            <span class="s0">property </span><span class="s2">'forge.logging.markers'</span><span class="s0">, </span><span class="s2">'REGISTRIES'</span>

            <span class="s3">// Recommended logging level for the console</span>
            <span class="s3">// You can set various levels here.</span>
            <span class="s3">// Please read: https://stackoverflow.com/questions/2031163/when-to-use-the-different-log-levels</span>
            <span class="s0">property </span><span class="s2">'forge.logging.console.level'</span><span class="s0">, </span><span class="s2">'debug'</span>

            <span class="s0">mods </span><span class="s1">{</span>
                <span class="s2">&quot;</span><span class="s0">$</span><span class="s1">{</span><span class="s0">mod_id</span><span class="s1">}</span><span class="s2">&quot; </span><span class="s1">{</span>
                    <span class="s0">source sourceSets.main</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s0">client </span><span class="s1">{</span>
            <span class="s3">// Comma-separated list of namespaces to load gametests from. Empty = all namespaces.</span>
            <span class="s0">property </span><span class="s2">'forge.enabledGameTestNamespaces'</span><span class="s0">, mod_id</span>
        <span class="s1">}</span>

        <span class="s0">server </span><span class="s1">{</span>
            <span class="s0">property </span><span class="s2">'forge.enabledGameTestNamespaces'</span><span class="s0">, mod_id</span>
            <span class="s0">args </span><span class="s2">'--nogui'</span>
        <span class="s1">}</span>

        <span class="s3">// This run config launches GameTestServer and runs all registered gametests, then exits.</span>
        <span class="s3">// By default, the server will crash when no gametests are provided.</span>
        <span class="s3">// The gametest system is also enabled by default for other run configs under the /test command.</span>
        <span class="s0">gameTestServer </span><span class="s1">{</span>
            <span class="s0">property </span><span class="s2">'forge.enabledGameTestNamespaces'</span><span class="s0">, mod_id</span>
        <span class="s1">}</span>

        <span class="s0">data </span><span class="s1">{</span>
            <span class="s3">// example of overriding the workingDirectory set in configureEach above</span>
            <span class="s0">workingDirectory project.file</span><span class="s1">(</span><span class="s2">'run-data'</span><span class="s1">)</span>

            <span class="s3">// Specify the modid for data generation, where to output the resulting resource, and where to look for existing resources.</span>
            <span class="s0">args </span><span class="s2">'--mod'</span><span class="s0">, mod_id, </span><span class="s2">'--all'</span><span class="s0">, </span><span class="s2">'--output'</span><span class="s0">, file</span><span class="s1">(</span><span class="s2">'src/generated/resources/'</span><span class="s1">)</span><span class="s0">, </span><span class="s2">'--existing'</span><span class="s0">, file</span><span class="s1">(</span><span class="s2">'src/main/resources/'</span><span class="s1">)</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s3">// Include resources generated by data generators.</span>
<span class="s0">sourceSets.main.resources </span><span class="s1">{ </span><span class="s0">srcDir </span><span class="s2">'src/generated/resources' </span><span class="s1">}</span>

<span class="s0">repositories </span><span class="s1">{</span>
    <span class="s3">// Put repositories for dependencies here</span>
    <span class="s3">// ForgeGradle automatically adds the Forge maven and Maven Central for you</span>

    <span class="s3">// If you have mod jar dependencies in ./libs, you can declare them as a repository like so.</span>
    <span class="s3">// See https://docs.gradle.org/current/userguide/declaring_repositories.html#sub:flat_dir_resolver</span>
    <span class="s3">// flatDir {</span>
    <span class="s3">//     dir 'libs'</span>
    <span class="s3">// }</span>
<span class="s1">}</span>

<span class="s0">dependencies </span><span class="s1">{</span>
    <span class="s3">// Specify the version of Minecraft to use.</span>
    <span class="s3">// Any artifact can be supplied so long as it has a &quot;userdev&quot; classifier artifact and is a compatible patcher artifact.</span>
    <span class="s3">// The &quot;userdev&quot; classifier will be requested and setup by ForgeGradle.</span>
    <span class="s3">// If the group id is &quot;net.minecraft&quot; and the artifact id is one of [&quot;client&quot;, &quot;server&quot;, &quot;joined&quot;],</span>
    <span class="s3">// then special handling is done to allow a setup of a vanilla dependency without the use of an external repository.</span>
    <span class="s0">minecraft </span><span class="s2">&quot;net.minecraftforge:forge:</span><span class="s0">$</span><span class="s1">{</span><span class="s0">minecraft_version</span><span class="s1">}</span><span class="s2">-</span><span class="s0">$</span><span class="s1">{</span><span class="s0">forge_version</span><span class="s1">}</span><span class="s2">&quot;</span>

    <span class="s3">// Example mod dependency with JEI - using fg.deobf() ensures the dependency is remapped to your development mappings</span>
    <span class="s3">// The JEI API is declared for compile time use, while the full JEI artifact is used at runtime</span>
    <span class="s3">// compileOnly fg.deobf(&quot;mezz.jei:jei-${mc_version}-common-api:${jei_version}&quot;)</span>
    <span class="s3">// compileOnly fg.deobf(&quot;mezz.jei:jei-${mc_version}-forge-api:${jei_version}&quot;)</span>
    <span class="s3">// runtimeOnly fg.deobf(&quot;mezz.jei:jei-${mc_version}-forge:${jei_version}&quot;)</span>

    <span class="s3">// Example mod dependency using a mod jar from ./libs with a flat dir repository</span>
    <span class="s3">// This maps to ./libs/coolmod-${mc_version}-${coolmod_version}.jar</span>
    <span class="s3">// The group id is ignored when searching -- in this case, it is &quot;blank&quot;</span>
    <span class="s3">// implementation fg.deobf(&quot;blank:coolmod-${mc_version}:${coolmod_version}&quot;)</span>

    <span class="s3">// For more info:</span>
    <span class="s3">// http://www.gradle.org/docs/current/userguide/artifact_dependencies_tutorial.html</span>
    <span class="s3">// http://www.gradle.org/docs/current/userguide/dependency_management.html</span>
<span class="s1">}</span>

<span class="s3">// This block of code expands all declared replace properties in the specified resource targets.</span>
<span class="s3">// A missing property will result in an error. Properties are expanded using ${} Groovy notation.</span>
<span class="s3">// When &quot;copyIdeResources&quot; is enabled, this will also run before the game launches in IDE environments.</span>
<span class="s3">// See https://docs.gradle.org/current/dsl/org.gradle.language.jvm.tasks.ProcessResources.html</span>
<span class="s0">tasks.named</span><span class="s1">(</span><span class="s2">'processResources'</span><span class="s0">, ProcessResources</span><span class="s1">)</span><span class="s0">.configure </span><span class="s1">{</span>
    <span class="s5">var </span><span class="s0">replaceProperties </span><span class="s1">= [</span>
            <span class="s0">minecraft_version: minecraft_version, minecraft_version_range: minecraft_version_range,</span>
            <span class="s0">forge_version: forge_version, forge_version_range: forge_version_range,</span>
            <span class="s0">loader_version_range: loader_version_range,</span>
            <span class="s0">mod_id: mod_id, mod_name: mod_name, mod_license: mod_license, mod_version: mod_version,</span>
            <span class="s0">mod_authors: mod_authors, mod_description: mod_description,</span>
    <span class="s1">]</span>
    <span class="s0">inputs.properties replaceProperties</span>

    <span class="s0">filesMatching</span><span class="s1">([</span><span class="s2">'META-INF/mods.toml'</span><span class="s0">, </span><span class="s2">'pack.mcmeta'</span><span class="s1">]) {</span>
        <span class="s0">expand replaceProperties </span><span class="s1">+ [</span><span class="s0">project: project</span><span class="s1">]</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s3">// Example for how to get properties into the manifest for reading at runtime.</span>
<span class="s0">tasks.named</span><span class="s1">(</span><span class="s2">'jar'</span><span class="s0">, Jar</span><span class="s1">)</span><span class="s0">.configure </span><span class="s1">{</span>
    <span class="s0">manifest </span><span class="s1">{</span>
        <span class="s0">attributes</span><span class="s1">([</span>
                <span class="s2">'Specification-Title'     </span><span class="s0">: mod_id,</span>
                <span class="s2">'Specification-Vendor'    </span><span class="s0">: mod_authors,</span>
                <span class="s2">'Specification-Version'   </span><span class="s0">: </span><span class="s2">'1'</span><span class="s0">, </span><span class="s3">// We are version 1 of ourselves</span>
                <span class="s2">'Implementation-Title'    </span><span class="s0">: project.name,</span>
                <span class="s2">'Implementation-Version'  </span><span class="s0">: project.jar.archiveVersion,</span>
                <span class="s2">'Implementation-Vendor'   </span><span class="s0">: mod_authors,</span>
                <span class="s2">'Implementation-Timestamp'</span><span class="s0">: </span><span class="s5">new </span><span class="s0">Date</span><span class="s1">()</span><span class="s0">.format</span><span class="s1">(</span><span class="s2">&quot;yyyy-MM-dd'T'HH:mm:ssZ&quot;</span><span class="s1">)</span>
        <span class="s1">])</span>
    <span class="s1">}</span>

    <span class="s3">// This is the preferred method to reobfuscate your jar file</span>
    <span class="s0">finalizedBy </span><span class="s2">'reobfJar'</span>
<span class="s1">}</span>

<span class="s3">// However if you are in a multi-project build, dev time needs unobfed jar files, so you can delay the obfuscation until publishing by doing:</span>
<span class="s3">// tasks.named('publish').configure {</span>
<span class="s3">//     dependsOn 'reobfJar'</span>
<span class="s3">// }</span>

<span class="s3">// Example configuration to allow publishing using the maven-publish plugin</span>
<span class="s0">publishing </span><span class="s1">{</span>
    <span class="s0">publications </span><span class="s1">{</span>
        <span class="s0">register</span><span class="s1">(</span><span class="s2">'mavenJava'</span><span class="s0">, MavenPublication</span><span class="s1">) {</span>
            <span class="s0">artifact jar</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s0">repositories </span><span class="s1">{</span>
        <span class="s0">maven </span><span class="s1">{</span>
            <span class="s0">url </span><span class="s2">&quot;file://</span><span class="s0">$</span><span class="s1">{</span><span class="s0">project.projectDir</span><span class="s1">}</span><span class="s2">/mcmodsrepo&quot;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s0">tasks.withType</span><span class="s1">(</span><span class="s0">JavaCompile</span><span class="s1">)</span><span class="s0">.configureEach </span><span class="s1">{</span>
    <span class="s0">options.encoding </span><span class="s1">= </span><span class="s2">'UTF-8' </span><span class="s3">// Use the UTF-8 charset for Java compilation</span>
<span class="s1">}</span>
</pre>
</body>
</html>